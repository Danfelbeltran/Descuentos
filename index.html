<!DOCTYPE html>
<html>
<head>
    <title>Mi Descuento</title>
    <meta charset="utf-8">
    <link rel="icon" href="img/icono.png">
    <meta name="keywords" content="Descuentos, tiendas, compras, online, cupones">
    <meta name="description" content="Descuentos">
    <meta name="autor" content="Daniel Beltran">
    <link rel="stylesheet" type="text/css" href="estilo.css">
    <link rel="stylesheet" type="text/css" href="normalize.css">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Overpass:wght@300&family=Rajdhani&display=swap" rel="stylesheet">
</head>
<body>
    <center>
        <h1><img src="img/icono.png">  Descuentos <img src="img/icono.png"></h1>
        
        <form>
            <b>
                <label for="valor">Valor del Producto:</label>
                <input class="inputvalor" type="text" id="valor" oninput="formatoMilesInput(this)" required><br><br>

                <label for="descuento"> % de Descuento:</label>
                <input class="casdescuento" type="number" id="descuentoValor" required>
                <input class="casvalue" type="text" id="descuento" value=" %" disabled><br><br>

                <button class="button" type="button" onclick="calcularDescuento()">Calcular Descuento</button>
            </b>
        </form>

        <script>
            function formatoMilesInput(input) {
                let num = input.value.replace(/\D/g, '');
                num = num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                input.value = num;
            }

            function calcularDescuento() {
                var valorProducto = parseInt(document.getElementById("valor").value.replace(/\D/g, ''), 10);
                var porcentajeDescuento = parseFloat(document.getElementById("descuentoValor").value);

                if (!isNaN(valorProducto) && !isNaN(porcentajeDescuento)) {
                    var descuento = (valorProducto * porcentajeDescuento) / 100;
                    var valorFinal = valorProducto - descuento;

                    document.getElementById("valorFinal").textContent = formatoMiles(valorFinal.toFixed(0));
                    document.getElementById("ahorro").textContent = formatoMiles(descuento.toFixed(0));
                } else {
                    alert("Ingresa valores v√°lidos para calcular el descuento.");
                }
            }

            function formatoMiles(num) {
                return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            }
        </script>

        <br><br>
        <h2>Resultado:</h2>
        <b>
            <p class="paga">Paga solo: <span id="valorFinal"></span></p><br>
            <p class="ahorro">Te ahorraste: <span id="ahorro"></span></p>
        </b>
        <br><br><br><H4><a href="Mi_descuento.html"><img src="img/refresh.jpg"></a></H4>
    </center>

    <footer>
    </footer>
</body>
</html>
